<div id="e-commerce-order" class="page-layout simple tabbed" layout="column">

    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="start center">
        <div class="white-fg" layout="row" layout-align="start center" flex>
            <md-button class="goto-orders-button md-icon-button" aria-label="Go to orders"
                       ng-click="vm.gotoOrders()"
                       translate translate-attr-aria-label="EC.GO_TO_ORDERS">
                <md-icon md-font-icon="icon-arrow-left"></md-icon>
            </md-button>

            <div layout="column" layout-align="start start">
                <div class="subtitle secondary-text">
                    <span>from</span>
                    <span>{{vm.order.legal_name.first}} {{vm.order.legal_name.last}}</span>
                </div>
            </div>
        </div>
    </div>
    <!-- / HEADER -->

    <!-- CONTENT -->
    <div class="content">

        <md-tabs md-dynamic-height>

            <md-tab>
                <md-tab-label>
                    <span>Payment Details</span>
                </md-tab-label>

                <md-tab-body>
                    <div class="order-detail-form-container customer md-background-bg md-whiteframe-1dp">
                        <div class="pb-16" layout="row" layout-align="start center">
                            <md-icon md-font-icon="icon-account" class="m-0 mr-16"></md-icon>
                            <div class="h2 secondary-text" translate="EC.PARENT">PARENT</div>
                        </div>

                        <div class="customer">
                            <table class="simple" ms-responsive-table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div layout="row" layout-align="start center">
                                                <img class="avatar" ng-src="{{vm.avatar.full}}">
                                                <span class="name text-nowrap">{{vm.order.legal_name.first}} {{vm.order.legal_name.last}}</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="email">{{vm.order.email}}</span>
                                        </td>
                                        <td>
                                            <span class="phone">{{vm.order.phone}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!--<md-tabs class="addresses">
                                <md-tab>
                                    <md-tab-label>
                                        <span translate="EC.SHIPPING_ADDRESS">Shipping Address</span>
                                    </md-tab-label>
                                    <md-tab-body>
                                        <div class="address">{{vm.order.customer.shippingAddress}}</div>
                                        <ui-gmap-google-map center="vm.shippingAddressMap.center"
                                                            zoom="vm.shippingAddressMap.zoom">
                                            <ui-gmap-marker coords="vm.shippingAddressMap.center"
                                                            idkey="vm.shippingAddressMap.marker.id"></ui-gmap-marker>
                                        </ui-gmap-google-map>
                                    </md-tab-body>
                                </md-tab>
                                <md-tab>
                                    <md-tab-label>
                                        <span translate="EC.INVOICE_ADDRESS">Invoice Address</span>
                                    </md-tab-label>
                                    <md-tab-body>
                                        <div class="address">{{vm.order.customer.invoiceAddress}}</div>
                                        <ui-gmap-google-map center="vm.invoiceAddressMap.center"
                                                            zoom="vm.invoiceAddressMap.zoom">
                                            <ui-gmap-marker coords="vm.invoiceAddressMap.center"
                                                            idkey="vm.invoiceAddressMap.marker.id"></ui-gmap-marker>
                                        </ui-gmap-google-map>
                                    </md-tab-body>
                                </md-tab>
                            </md-tabs>-->

                        </div>
                    </div>

                    <div class="order-detail-form-container status md-background-bg md-whiteframe-1dp">
                        <div class="pb-16" layout="row" layout-align="start center">
                            <md-icon md-font-icon="icon-clock" class="m-0 mr-16"></md-icon>
                            <div class="h2 secondary-text" translate="EC.ORDER_STATUS">Order Status</div>
                        </div>
                        <table class="simple" ms-responsive-table>
                            <thead>
                                <tr>
                                    <th translate="EC.STATUS">Status</th>
                                    <th translate="EC.UPDATED_ON">Updated On</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="status in vm.invoice.status">
                                    <td>
                                        <span class="status {{status.color}}">{{status.name}}</span>
                                    </td>
                                    <td>
                                        {{status.date}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="update-status" layout="row" layout-align="start center">
                            <md-input-container flex>
                                <label>Select a status</label>
                                <md-select ng-model="vm.newStatus">
                                    <md-option ng-repeat="status in vm.orderStatuses" value="{{status.id}}">
                                        {{status.name}}
                                    </md-option>
                                </md-select>
                            </md-input-container>

                            <md-button class="md-raised md-accent" ng-click="vm.updateStatus(vm.newStatus)"
                                       ng-disabled="!vm.newStatus">
                                Update Status
                            </md-button>
                        </div>
                    </div>

                    <div class="order-detail-form-container payments md-background-bg md-whiteframe-1dp">
                        <div class="pb-16" layout="row" layout-align="start center">
                            <md-icon md-font-icon="icon-cash" class="m-0 mr-16"></md-icon>
                            <div class="h2 secondary-text" translate="EC.PAYMENT">Payment</div>
                        </div>
                        <table class="simple" ms-responsive-table>
                            <thead>
                                <tr>
                                    <th translate="EC.TRANSACTION_ID">TransactionID</th>
                                    <th translate="EC.PAYMENT_METHOD">Payment Method</th>
                                    <th translate="EC.AMOUNT">Amount</th>
                                    <th translate="EC.DATE">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        {{vm.order.payment.transactionId}}
                                    </td>
                                    <td>
                                        {{vm.order.payment.method}}
                                    </td>
                                    <td>
                                        {{vm.order.payment.amount}}
                                    </td>
                                    <td>
                                        {{vm.order.payment.date}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </md-tab-body>
            </md-tab>

            <md-tab>
                <md-tab-label>
                    <span>Student(s)</span>
                </md-tab-label>

                <md-tab-body>
                    <div class="order-detail-form-container products md-background-bg md-whiteframe-1dp">
                        <table class="dataTable row-border hover" datatable="ng" dt-instance="vm.dtInstance"
                               dt-options="vm.dtOptions">
                            <thead>
                                <tr>
                                    <th class="secondary-text">
                                        <div class="table-header">
                                            <span class="column-title">Name</span>
                                        </div>
                                    </th>
                                    <th class="secondary-text">
                                        <div class="table-header">
                                            <span class="column-title">Tuition</span>
                                        </div>
                                    </th>
                                    <th class="secondary-text">
                                        <div class="table-header">
                                            <span class="column-title">Actions</span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="student in ::vm.order.students">
                                  <td>
                                    <div layout="row" layout-align="start center">
                                      <img class="avatar" ng-src="{{student.avatar.thumb}}">
                                      <span class="name text-nowrap">{{student.legal_name.first}} {{student.legal_name.last}}</span>
                                    </div>
                                  </td>
                                    <td>{{student.total}}</td>
                                    <td>
                                        <md-button class="edit-button md-icon-button"
                                                   ng-click="vm.gotoProductDetail(student._id)"
                                                   aria-label="Product details"
                                                   translate translate-attr-aria-label="EC.STUDENT_DETAIL">
                                            <md-icon class="material-icons s16">pencil</md-icon>
                                        </md-button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </md-tab-body>
            </md-tab>

          <md-tab>
            <md-tab-label>
              <span translate="EC.INVOICE">Invoice</span>
            </md-tab-label>

            <md-tab-body>

              <div class="modern page-layout blank" layout="row" ms-scroll>
                <div class="invoice-container">

                  <!-- INVOICE -->
                  <div class="card md-whiteframe-8dp">
                    <div class="header" layout="row" layout-align="space-between start">
                      <div class="ids" layout="column">
                        <div layout="row" class="seller" layout-align="start center">
                          <div class="logo md-accent-bg" layout="row" layout-align="center center">
                            <div>F</div>
                          </div>

                          <div class="divider"></div>

                          <div class="detail">
                            <div class="title">{{vm.invoice.from.title}}</div>
                            <div ng-if="vm.invoice.from.address" class="address">{{vm.invoice.from.address}}</div>
                            <div ng-if="vm.invoice.from.phone" class="phone"><span
                              translate="INVOICE.PHONE">Phone</span>:
                              {{vm.invoice.from.phone}}
                            </div>
                            <div ng-if="vm.invoice.from.email" class="email"><span
                              translate="INVOICE.EMAIL">Email</span>:
                              {{vm.invoice.from.email}}
                            </div>
                            <div ng-if="vm.invoice.from.website" class="website"><span
                              translate="INVOICE.WEB">Web</span>:
                              {{vm.invoice.from.website}}
                            </div>
                          </div>
                        </div>

                        <div layout="row" class="client" layout-align="start center">
                          <div class="label" layout="row" layout-align="end center">
                            <div translate="INVOICE.CLIENT">CLIENT</div>
                          </div>

                          <div class="divider"></div>

                          <div class="detail">
                            <div class="title">{{vm.invoice.client.title}}</div>
                            <div ng-if="vm.invoice.client.address" class="address">{{vm.invoice.client.address}}</div>
                            <div ng-if="vm.invoice.client.phone" class="phone"><span
                              translate="INVOICE.PHONE">Phone</span>:
                              {{vm.invoice.client.phone}}
                            </div>
                            <div ng-if="vm.invoice.client.email" class="email"><span
                              translate="INVOICE.EMAIL">Email</span>:
                              {{vm.invoice.client.email}}
                            </div>
                            <div ng-if="vm.invoice.client.website" class="website"><span
                              translate="INVOICE.WEB">Web</span>:
                              {{vm.invoice.client.website}}
                            </div>
                          </div>
                        </div>
                      </div>

                      <table class="summary">
                        <tr class="code">
                          <td class="label" translate="INVOICE.INVOICE">INVOICE</td>
                          <td class="value">{{vm.invoice.number}}</td>
                        </tr>

                        <tr>
                          <td class="label" translate="INVOICE.INVOICE_DATE">INVOICE DATE</td>
                          <td class="value">{{vm.invoice.date}}</td>
                        </tr>

                        <tr>
                          <td class="label" translate="INVOICE.DUE_DATE">DUE DATE</td>
                          <td class="value">{{vm.invoice.dueDate}}</td>
                        </tr>

                        <tr>
                          <td class="label" translate="INVOICE.TOTAL_DUE">TOTAL DUE</td>
                          <td class="value">{{vm.invoice.total | currency}}</td>
                        </tr>
                      </table>
                    </div>

                    <div class="content">
                      <table class="simple invoice-table">
                        <thead>
                        <th translate="INVOICE.SERVICE">SERVICE</th>
                        <th translate="INVOICE.UNIT">UNIT</th>
                        <th class="text-right" translate="INVOICE.UNIT_PRICE">UNIT PRICE</th>
                        <th class="text-right" translate="INVOICE.QUANTITY">QUANTITY</th>
                        <th class="text-right" translate="INVOICE.TOTAL">TOTAL</th>
                        </thead>
                        <tbody>
                        <tr ng-repeat="service in vm.invoice.services">
                          <td>
                            <div class="title"> {{service.title}}</div>
                            <div class="detail"> {{service.detail}}</div>
                          </td>
                          <td>
                            {{service.unit}}
                          </td>
                          <td class="text-right">
                            {{service.unitPrice | currency}}
                          </td>
                          <td class="text-right">
                            {{service.quantity}}
                          </td>
                          <td class="text-right">
                            {{service.total | currency}}
                          </td>
                        </tr>
                        </tbody>
                      </table>

                      <table class="simple invoice-table-footer">
                        <tbody>
                        <tr class="subtotal">
                          <td translate="INVOICE.SUBTOTAL">SUBTOTAL</td>
                          <td>{{vm.invoice.subtotal | currency}}</td>
                        </tr>
                        <tr class="tax">
                          <td translate="INVOICE.TAX">TAX</td>
                          <td>{{vm.invoice.tax | currency}}</td>
                        </tr>
                        <tr class="discount">
                          <td translate="INVOICE.DISCOUNT">DISCOUNT</td>
                          <td>-{{vm.invoice.discount | currency}}</td>
                        </tr>
                        <tr class="total">
                          <td translate="INVOICE.TOTAL">TOTAL</td>
                          <td>{{vm.invoice.total | currency}}</td>
                        </tr>
                        </tbody>
                      </table>
                    </div>

                    <div class="footer">
                      <div class="note" translate="INVOICE.NOTE">Please pay within 15 days. Thank you for your business.</div>
                      <div layout="row" layout-align="start start">
                        <div class="logo md-accent-bg" layout="row" layout-align="center center">
                          <div>F</div>
                        </div>
                        <div class="small-note" translate="INVOICE.SMALL_NOTE">
                          In condimentum malesuada efficitur. Mauris volutpat placerat auctor. Ut ac congue dolor. Quisque
                          scelerisque lacus sed feugiat fermentum. Cras aliquet facilisis pellentesque. Nunc hendrerit
                          quam at leo commodo, a suscipit tellus dapibus. Etiam at felis volutpat est mollis lacinia.
                          Mauris placerat sem sit amet velit mollis, in porttitor ex finibus. Proin eu nibh id libero
                          tincidunt lacinia et eget eros.
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- / INVOICE -->

                  <!-- Use the following element to add breaks to your pages -->
                  <!-- This will make sure that the section after this element will be printed on a new page -->
                  <div class="page-break"></div>

                </div>
              </div>

            </md-tab-body>
          </md-tab>

        </md-tabs>

    </div>
    <!-- / CONTENT -->

</div>
